/*
 * Author: Damian Schwyrz <mail@damianschwyrz.de>
 * URL: https://www.damianschwyrz.de
 * Copyright (c) 2018.
 */

$(function () {
    $(".destroy-target").click(function (e) {
        e.preventDefault();

        if (!actionConfirmed()) {
            return false;
        }

        var id = $(this).data('id');

        $.ajax({
            url: $(this).attr("href"),
            type: 'DELETE',
            data: {id: id},
            success: function (result) {
                $(".target-" + id).fadeOut();
            },
            error: function (result) {
                console.log(result);
            }
        });
    });

    $(".archive-target").click(function (e) {
        e.preventDefault();

        if (!actionConfirmed()) {
            return false;
        }

        var id = $(this).data('id');

        $.ajax({
            url: $(this).attr("href"),
            type: 'PATCH',
            data: {id: id},
            success: function (result) {
                $(".target-" + id).fadeOut();
            },
            error: function (result) {
                console.log(result);
            }
        });
    });

    $(".copy-to-clipboard").click(function (e) {
        e.preventDefault();
        var temp = $("<input>");
        $("body").append(temp);
        var text = $(this).html();
        temp.val(text).select();
        document.execCommand("copy");
        temp.remove();

        loadInfoBox('#infobox', '"' + text + '" was copied to your clipboard.')
    });

});
