# Pentest Management (ptM)

ptM is frontend which gives the user the ability to manage different pentest projects. A limited set of popular tools like massdns, nmap or wpscan can be executed with a click.

## Important - Read first!
This tool is designed to execute shell commands on the underlying ubuntu web server! Its also necessary to install different python and ruby tools as root user via git. You have to know what you are doing! Therefore my recommendation is not to install this kind of tool on systems/servers where other websites are located. Buy a cheap vps!

## Features

- Login/Logout as admin
- Adding "projects" (main domains) and scanning those with massdns or sublister
- Adding subdomains to a project and scanning those with dirsearch, nmap, wpscan (more to come...)
- Adding notes, http status, headers, redirects, cname, ips, ... (this data will be gathered automatically)
- Observing system queue and interacting with it - "tsp" is necessary!

## Preinstall

This tool was developed under Ubuntu 16.04, mysql 5.7, nginx and PHP 7.2 - since I decided to use nullable types and void as return type, __PHP >= 7.1__ is necessary! 

__You also need__:

1. python2.7
2. python 3
3. ruby2

Please use "whereis" to get the absolute paths!

For the heavy load stuff, I'm using "tsp", this also needs to be installed:

```bash
sudo apt-get install tsp
```

1. nmap

Dead simple installation using apt-get:

```bash
sudo apt-get install nmap
```

2. pip and pip3

```bash
sudo apt-get install pip-python pip3-python
```

3. dig

dig is usually preinstalled on all ubuntu servers.

4. npm & yarn & composer

- [NPM/NodeJS Installation](https://docs.npmjs.com/getting-started/installing-node)
- [yarn Installation](https://yarnpkg.com/lang/en/docs/install/)
- [composer Installation](https://getcomposer.org/doc/00-intro.md#globally)

## Third party tools

I'm using different third party tools, some of them require you to install different dependencies as root user. Please take a look at the repositories.

__Every tools needs to be located within the "toolset" folder in the base path.__

#### massdns [-> Github](https://github.com/blechschmidt/massdns)

massdns is used in combination with subbrute to enumerate as much as possbile subdomains as fast as possible. 

Tip: go to toolset/massdns and delete "my" "bin/massdns"-file. Then execute the following command to make a new bin file:
```bash
make
```
#### sublist3r [-> Github](https://github.com/aboul3la/Sublist3r)

sublist3r is used to do recon using public sources and get subdomains.

Tip: Go to toolset/sublister and execute the following command to get all python deps installed:
```bash
sudo pip3 install -r requirements.txt
```

#### dirsearch [-> Github](https://github.com/maurosoria/dirsearch)

Nice tool to brute force hidden files and folders.



#### wpscan [-> Github](https://github.com/wpscanteam/wpscan)

wpscan is a ruby tool to scan wordpress websites. You have to install all dependencies on Ubuntu like descriped in the repo:

Tip: after installing the ubuntu deps, just go to toolset/wpscan and execute:

```bash
sudo gem install bundler && bundle install --without test
```

This will install all ruby dependencies within the folder.

## Install Laravel 5.6

This tool is based on "Laravel 5.6" - take a look at [the official website](https://laravel.com/docs/5.6/installation) to get an idea whats important when installing Laravel.

The steps are quite simple:

1. Clone this repo into you folder
2. Edit example.env and rename it to ".env"
3. It's important to edit the database credentials, updating the url and setting the "TOOLSET_BIN_*" variables - just use "whereis" to get the full paths of PHP 7.2, Ruby2 and Python 2/3.
4. Under normal circumstances you won't need to change the "TOOLSET_PATH_*" Variables! So just ensure everything is there ;)

__Installing Laravel:__

```bash
composer install
```

__Compiling assets via Laravel mix:__
```bash
yarn install && npm run prod
```

__Regenerate app key:__
```bash
php artisan key:generate
```

__Migrate database and seed data__
```bash
php artisan migrate:fresh --seed
```

__Configure webserver__

Take a look at the [Laravel documentation](https://laravel.com/docs/5.6/installation)

## Login

In the current version there is no user manegement where its possible to change useremail or password. So for now just use my simple user creds:

- Login: mail [at] damianschwyrz.de
- Passwort: 123456

__Want another login?__ Change database/seeds/UsersTableSeeder.php and rerun "php artisan migrate:fresh --seed" - keep in mind: all data will be deleted!

## Screenshots

coming soon

## TODO

1. User Management
2. Tests
3. CMS Enumeration
4. aquatone integration
5. other tools
6. activate more options for attacking sites (via wpscan, ...)